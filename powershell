@"
param (
  [string]$version = "1.0.0"
)

Write-Host "ðŸ“¦ Starting deployment for version $version"

$repoUrl = "http://10.1.96.4:8098/repository/static-repo/SimpleIISApp-$version.zip"
$outputPath = "C:\deployment\SimpleIISApp.zip"
$extractPath = "C:\inetpub\wwwroot\SimpleIISApp"

# Download the ZIP from Nexus (no authentication)
Invoke-WebRequest -Uri $repoUrl -OutFile $outputPath

# Remove old site files
if (Test-Path $extractPath) {
    Remove-Item $extractPath -Recurse -Force
}

# Extract the new ZIP contents to IIS path
Expand-Archive -Path $outputPath -DestinationPath $extractPath

Write-Host "âœ… Deployment complete for version $version"
"@ | Set-Content -Path "C:\deployment\deploy-dotnet.ps1" -Encoding UTF8
